---
description: 
globs: 
---
# Chatbot Rules

## Voiceflow Integration
- Endpoint: POST /api/rag-query
- Required Headers:
  ```ts
  'x-org-id': string
  'Authorization': `Bearer ${token}`
  
## Query Handling

1. Parse user question
2. Search Supabase vector DB (esg_chunks)
3. Inject top 3 relevant chunks + ESG metadata
4. Format response using Voiceflow template

## UI Components

- Loading State: Animated ESG-themed spinner
- Error State: Clear explanation + retry button
- History: Persist last 10 conversations locally